<html lang="en">
<head>
  <meta charset="utf-8">

  <title>JanusVR Interface Window</title>
  <meta name="description" content="JanusVR Interface Settings Menu">
  <meta name="author" content="JanusVR Inc.">
  <script src="../../scripts/tabs.js"></script>
  <script src="../../skins/theme.js"></script>
  <script>
  function clickSound() {
  document.getElementById('sound1').play();
  }

  function getRoomCode() {  
  //set the textarea to roomcode
  
  if (window.janus.locked() == 0)
  {  
  document.getElementById("textinput").value = window.janus.roomcode();
  }
  else
  {
  document.getElementById("textinput").value = window.janus.roomcode();
  }
  
  
  
  
  }
  
  function setRoomCode() {  
  //set the textarea to roomcode
  clickSound()
  
  
  
  
  if (window.janus.locked() == 0)
  {
  window.janus.setroomcode(document.getElementById("textinput").value);
  }
  else
  {
  parent.shownotification('You can\'t make changes to a locked webspace. ','notifications/locked.png',"null","#442332");
  //window.janus.setroomcode(document.getElementById("textinput").value);
  }
  
  
  
  
  }
    
  
  
  
  var previousroomurl;

  setInterval(function() { //if the room changes, refresh the code in the editor

  if (window.janus.currenturl() != previousroomurl)
  {
  getRoomCode();  
  }

 previousroomurl = window.janus.currenturl();
  
  
  },50);
  
  
  
  
  
  
  
  
  
  
  window.onload = function () {
    initializeAppTheme("../../")
  tabSelect("codetabcontainer","codetabbutton")
  window.onresize()
  
  
  
  

  }

  
  
   window.onresize = function(event) { //make sure the window area stays a consistent size

 console.log("calc(100% - "+document.getElementById("tabrow").offsetHeight+"px)"	);

 
 if (document.getElementById("tabrow").offsetWidth >= 200) //if you change the 200 here, also change the min-width of the window containing it. this is to prevent flicker when vertically resizing a minimally (width) sized window
 {
document.getElementById("windowarea").style.height = "calc(100% - "+(document.getElementsByClassName("tabrow")[0].offsetHeight+3)+"px)";	
document.getElementById("textinput").style.height = "calc(100% - "+((document.getElementsByClassName("tabrow")[0].offsetHeight+3)+(document.getElementById("bottombar").offsetHeight))+"px)";	
 }
};
  

  
    </script>
  

  
</head>

<body >

<div class="windowcontainer">

<div class="tabrow unselectable" id="tabrow">

	<div class="tabbutton" id="codetabbutton" onmousedown="tabSelect('codetabcontainer','codetabbutton')">MARKUP</div></li>
	<!-- <div class="tabbutton" id="inspectortabbutton" onmousedown="tabSelect('inspectortabcontainer','inspectortabbutton')">INSPECTOR</div></li> -->

</div>


<div class="windowarea unselectable" id="windowarea">
			
				<div class="tabcontainer" id="codetabcontainer" style="height:100%;max-height:100%;">
				<textarea class="textinput" id="textinput" spellcheck="false">The interface was unable to retrieve room code because of an error.</textarea>
				
						<div id="bottombar" class="bottombar">
				
				<div class="button" style="float:right;" onmousedown="setRoomCode()">
				APPLY
				</div>

							
				</div>
				</div>
							

									
					
					
					
					
					
				<div class="tabcontainer" id="inspectortabcontainer" style="height:100%;max-height:100%;">
	


		
				</div>

									
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					
		</div>			


























		
</div>

<audio id="sound1" src="..\..\sounds\click.wav" preload="auto"></audio>

</body>
</html>